---
layout: post
title: "Released Selenide 6.5.0"
description: ""
category:
header-text: "setValue remastered"
tags: []
---
{% include JB/setup %}

<br>
# Good night!

<br>
We released [Selenide 6.5.0](https://github.com/selenide/selenide/milestone/151?closed=1).

### Now you can mask passwords in reports

Sometimes you need to type passwords and other sensitive data into input fields. Sometimes people don't want this 
data to be visible in test reports (e.g. Allure or TextReport). And ask to hide this sensitive data somehow.  

I personally never understood why it's a problem.  
Why the password from test environment should be a problem?  
You don't use the same password in production, right?  
You don't run tests in production, right?

Anyway, we made it possible to mask sensitive data in test reports:

```java
  $("#password").setValue(withText("admin").sensitive());
                                         // replaces by "********"

  $("#username").setValue(withText("john").withDisplayedText("J* username"));
                                         // replaces by "J* username"
```

See [issue 1768](https://github.com/selenide/selenide/issues/1768) and [PR 1770](https://github.com/selenide/selenide/pull/1770).

<br>

### Now you can easily pick a date in `<input type=date>`

It's not a trivial task to pick a date in Selenium. 

When your application has element like `<input type=date>`, and your test tries to click it, different browsers open 
different calendars and use different date formats. In theory, they should use format based on user settings, but in 
reality each browser plays its own game.

This causes flaky tests that might work on your machine, but occasionally fail on others.

As a result of my investigation, I found that the only stable way to pick a date is setting a value in format 
`yyyy-mm-dd` using JavaScript snippet. It seems to work in all OSs and browsers.

Now you can easily do it with new method `withDate`:

```java
  LocalDate birthday = LocalDate.parse("1979-12-31");
  $("#birthday").setValue(withDate(birthday));
```

See [issue 1753](https://github.com/selenide/selenide/issues/1753) and [PR 1770](https://github.com/selenide/selenide/pull/1770).

<br>

### Now method `$.setValue("")` supports React, Vue.js etc.

Standard Selenium method `WebElement.clean()` (e.g. it's used in Selenide method `$.setValue()`) doesn't always work 
when the application uses some tricky constructions (generated by React/Vue/...) instead of standard `<input>`.  

Hopefully, we have fixed it. Waiting for your feedback. 

Now the following 2 methods abandoned using `WebElement.clear()`. They use key combinations instead:

#### 1. Method `$.clear()`:
```java
input.sendKeys(HOME, chord(SHIFT, END), BACK_SPACE);
```

#### 2. Method `$.setValue("")`:
```java
input.sendKeys(HOME, chord(SHIFT, END), BACK_SPACE, TAB);
```

This new way seems to work in all OSs and browsers.

See [issue 1497](https://github.com/selenide/selenide/issues/1497) and [PR 1787](https://github.com/selenide/selenide/pull/1787).

Thanks to [Alexei Vinogradov](https://github.com/vinogradoff) for the research in [PR 1499](https://github.com/selenide/selenide/pull/1499).

<br>

### Removed triggering duplicate `blur` and `change` events
As a result of previous change, method `$.setValue("blah")` triggers `blur` and `change` events only once.  

Before this release, method `$.setValue("blah")` worked in two steps and therefore triggered events twice:
* Step 1. `$.clear()`  // triggered `blur` and `change`
* Step 2. `$.sendKeys("blah")` // triggered `blur` and `change` once more

The events triggered on the first step could cause unexpected effects, including disappearing of the field itself.  
See [issue 960](https://github.com/selenide/selenide/issues/960).

<br>

### Trigger `blur` on a previous element
During working on the previous change, we improved method `$.setValue("blah")` so that it triggers `blur` event on a
previous active element. At least it helped to fix some of our flaky tests. Hopefully, it can improve your tests as well. 

See [issue 1784](https://github.com/selenide/selenide/issues/1784) and [commit 593e6fc9005](https://github.com/selenide/selenide/commit/593e6fc900500d9).

<br>

### Now method `$.setValue()` and `$.append()` check that element is not disabled or readonly

See [issue 1523](https://github.com/selenide/selenide/issues/1523) and [PR 1787](https://github.com/selenide/selenide/pull/1787).

<br>

### Added conditions "interactable" and "editable"

These conditions existed inside of Selenide, but were not available to end-users.   
Now you can also use them:

```java
$("input[type=file]").shouldBe(interactable);  
             // interactable = visible OR "opacity: 0"

$("input").shouldBe(editable);
             // editable = interactable AND enabled AND !readonly
```

See [issue 1523](https://github.com/selenide/selenide/issues/1523) and [PR 1787](https://github.com/selenide/selenide/pull/1787).

<br>

### Method `$.download(FOLDER)` waits for full download completion

Sometimes test might be flaky when it tries to download a file which is being downloaded very slowly. Selenide might 
detect and copy the file in `C:\Downloads` folder which is not fully downloaded yet.

Now Selenide waits until `C:\Downloads` doesn't contain any files "*.crdownload" (for Chrome) or "*.part" (for Firefox). 
This is a temporary file created by the browser for a short period of time while the file is beging downloaded.

See [issue 1779](https://github.com/selenide/selenide/issues/1779), 
[PR 1804](https://github.com/selenide/selenide/pull/1804) and [PR 1769](https://github.com/selenide/selenide/pull/1769).

<br>

### Added method `stream()` for collections

Actually, method `$$.stream()` already existed, but was deprecated in version [6.2.0](/2022/01/10/selenide-6.2.0/). 
Now you can pick one of two non-deprecated replacements:
* `$$.asFixedIterable().stream()`
* `$$.asDynamicIterable().stream()`

See [issue 1773](https://github.com/selenide/selenide/issues/1773) and [PR 1774](https://github.com/selenide/selenide/pull/1774).

<br>

### Remove Selenium built-in OpenTelemetry 

If I am not mistaken, this "telemetry" was added Selenium 4. 
I have no idea why it's needed, but it could interfere with someone who already had their own telemetry.   
It was simpler for us to remove it than support both. :) 

Thanks to [Petro Ovcharenko](https://github.com/zzz) and [Aliaksandr Rasolka](https://github.com/zzz) 
for [PR 1763](https://github.com/selenide/selenide/pull/1763).

<br>

### Upgraded dependencies

* Selenium [4.1.3 -> 4.1.4](https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG).
* WebDriverManager [5.1.0 -> 5.1.1](https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md)
* Netty [4.1.75.Final -> 4.1.76.Final](https://netty.io/news/2022/04/12/4-1-76-Final.html)
* Netty [4.1.76.Final -> 4.1.77.Final](https://netty.io/news/2022/05/06/2-1-77-Final.html)
* LittleProxy [2.0.7 -> 2.0.9](https://github.com/LittleProxy/LittleProxy/releases)

By the way LittleProxy projects moved to a dedicated [github organisation](https://github.com/LittleProxy/LittleProxy), 
and I became the main maintainer of the project. I was never a big fan of proxies, but LittleProxy is used inside of 
Selenide, and somebody needs to maintain it...

<br>

# UPD Selenide 6.5.1
A small update [Selenide 6.5.1](https://github.com/selenide/selenide/milestone/153?closed=1):
* [#1808](https://github.com/selenide/selenide/issues/1808) Fixed `$.clear()` so that it doesn't press `tab` anymore  --  see [PR #1809](https://github.com/selenide/selenide/pull/1809)
* [#1806](https://github.com/selenide/selenide/pull/1806) Bump browserup-proxy-core 2.1.4 to 2.1.5


<br>

# UPD Selenide 6.5.2
[#1497](https://github.com/selenide/selenide/issues/1497) Fixed method `$.clear()` on a fresh Firefox: now it
presses "Ctrl+A -> Delete" instead of "Home -> Shift+A -> Delete".
See [PR #1838](https://github.com/selenide/selenide/pull/1838).

<br>

Stay tuned!

<br>

[Andrei Solntsev](http://asolntsev.github.io/)

selenide.org
